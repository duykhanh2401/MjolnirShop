{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACvKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://shop/./public/js/util/fetchAPI.js","webpack://shop/./public/js/util/toastify.js","webpack://shop/./public/js/view/cart.js","webpack://shop/./public/js/view/checkout.js","webpack://shop/./public/js/view/me.js","webpack://shop/./public/js/view/product.js","webpack://shop/webpack/bootstrap","webpack://shop/webpack/runtime/define property getters","webpack://shop/webpack/runtime/hasOwnProperty shorthand","webpack://shop/webpack/runtime/make namespace object","webpack://shop/./public/js/view/index.js"],"sourcesContent":["export const getDataAPI = async (url) => {\r\n\tconst res = await axios.get(`/api/v1/${url}`);\r\n\treturn res;\r\n};\r\n\r\nexport const postDataAPI = async (url, data) => {\r\n\tconst res = await axios.post(`/api/v1/${url}`, data);\r\n\treturn res;\r\n};\r\n\r\nexport const patchDataAPI = async (url, data) => {\r\n\tconst res = await axios.patch(`/api/v1/${url}`, data);\r\n\treturn res;\r\n};\r\n\r\nexport const putDataAPI = async (url, data) => {\r\n\tconst res = await axios.put(`/api/v1/${url}`, data);\r\n\treturn res;\r\n};\r\n\r\nexport const deleteDataAPI = async (url, data) => {\r\n\tconst res = await axios.delete(`/api/v1/${url}`, data);\r\n\treturn res;\r\n};\r\n","export const toast = (status, message) => {\r\n\t// data\r\n\tvar clear;\r\n\tvar msgDuration = 3000;\r\n\tvar $msg = $('.msg');\r\n\tfunction timer() {\r\n\t\tclearTimeout(clear);\r\n\t\tclear = setTimeout(function () {\r\n\t\t\thide();\r\n\t\t}, msgDuration);\r\n\t}\r\n\r\n\tfunction hide() {\r\n\t\t$msg.removeClass('msg-success msg-danger msg-warning msg-info active');\r\n\t}\r\n\t// 2 seconds\r\n\thide();\r\n\r\n\t// cache DOM\r\n\r\n\t// render message\r\n\r\n\tswitch (status) {\r\n\t\tcase 'success':\r\n\t\t\t$msg.addClass('msg-success active').text(message);\r\n\t\t\tbreak;\r\n\t\tcase 'danger':\r\n\t\t\t$msg.addClass('msg-danger active').text(message);\r\n\t\t\tbreak;\r\n\t\tcase 'warning':\r\n\t\t\t$msg.addClass('msg-warning active').text(message);\r\n\t\t\tbreak;\r\n\t\tcase 'info':\r\n\t\t\t$msg.addClass('msg-info active').text(message);\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\t// bind events\r\n\r\n\t$msg.on('transitionend', timer);\r\n};\r\n","import { postDataAPI, deleteDataAPI } from '../util/fetchAPI';\r\nimport { toast } from './../util/toastify';\r\n\r\nconst formatter = new Intl.NumberFormat('vi-VN', {\r\n\tstyle: 'currency',\r\n\tcurrency: 'VND',\r\n});\r\n\r\nconst removeProduct = async (e) => {\r\n\tconst res = await postDataAPI('cart/removeProduct', {\r\n\t\tproduct: e.currentTarget.dataset.id,\r\n\t});\r\n\r\n\tif (res.status === 200) {\r\n\t\ttoast('success', 'Đã xoá 1 sản phẩm');\r\n\t\tconst productsRender = res.data.data.map((productItem) => {\r\n\t\t\tconst { product } = productItem;\r\n\t\t\tproduct.qty = productItem.quantity;\r\n\t\t\tproduct.productID = product._id;\r\n\t\t\treturn product;\r\n\t\t});\r\n\t\t(() => renderCart(productsRender, true))();\r\n\t} else {\r\n\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t}\r\n};\r\n\r\nconst renderCart = (products) => {\r\n\tconst cartRender = document.querySelectorAll('.table.table-cart');\r\n\r\n\tif (products.length) {\r\n\t\tcartRender.forEach((el, index) => {\r\n\t\t\tlet totalPrice = 0;\r\n\t\t\tel.innerHTML =\r\n\t\t\t\t`<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th scope=\"col\"></th>\r\n\t\t\t\t<th scope=\"col\">Tên Sản Phẩm</th>\r\n\t\t\t\t<th scope=\"col\">Giá</th>\r\n\t\t\t\t<th scope=\"col\" style=\"width: 160px;\">Số Lượng</th>\r\n\t\t\t\t<th scope=\"col\"> </th>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody >` +\r\n\t\t\t\tproducts\r\n\t\t\t\t\t.map((product) => {\r\n\t\t\t\t\t\ttotalPrice += product.price * product.qty;\r\n\t\t\t\t\t\treturn `\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td class=\"w-25\">\r\n\t\t\t\t\t\t\t<a href=\"/category/${product.category[0].slug}/${product.slug}\">\r\n\t\t\t\t\t\t\t<img class=\"img-fluid img-thumbnail\" src=${product.image} alt=\"Sheep\" />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td class=\"name-cart\">${product.name}</td>\r\n\t\t\t\t\t\t\t<td>${formatter.format(product.price)}</td>\r\n\r\n\t\t\t\t\t\t\t<td class=\"qty quantity-control\">\r\n\t\t\t\t\t\t\t${\r\n\t\t\t\t\t\t\t\tcartRender.length === 1\r\n\t\t\t\t\t\t\t\t\t? `\r\n\t\t\t\t\t\t\t<span class=\"qty\">${product.qty}</span>\r\n\t\t\t\t\t\t\t `\r\n\t\t\t\t\t\t\t\t\t: index === 0\r\n\t\t\t\t\t\t\t\t\t? `<button data-id=${product.productID} class=\"dash-product\"><i class=\"bi bi-dash-lg\"></i></button>\r\n\t\t\t\t\t\t\t\t\t<span class=\"qty qty-cart-page\">${product.qty}</span>\r\n\t\t\t\t\t\t\t\t\t<button data-id=${product.productID} class=\"plus-product\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"bi bi-plus-lg\" ></i>\r\n\t\t\t\t\t\t\t\t\t</button> `\r\n\t\t\t\t\t\t\t\t\t: `\r\n\t\t\t\t\t\t\t\t\t<span class=\"qty\">${product.qty}</span>\r\n\t\t\t\t\t\t\t\t\t `\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td data-id=${\r\n\t\t\t\t\t\t\t\tproduct.productID\r\n\t\t\t\t\t\t\t} class=\"remove-product\"><a class=\"btn btn-danger btn-sm\" href=\"#\"><i class=\"bi bi-x\"></i></a></td>\r\n\t\t\t\t\t\t</tr>`;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.join('') +\r\n\t\t\t\t`</tbody>`;\r\n\t\t\tdocument.querySelectorAll('.total-price')[\r\n\t\t\t\tindex\r\n\t\t\t].innerHTML = `Tạm Tính: <span class=\"text-success \"> ${formatter.format(\r\n\t\t\t\ttotalPrice,\r\n\t\t\t)} <span/>`;\r\n\t\t});\r\n\r\n\t\tdocument\r\n\t\t\t.querySelectorAll('.navigation-cart')\r\n\t\t\t.forEach((el) => el.classList.remove('disabled'));\r\n\r\n\t\tif (cartRender.length === 2) {\r\n\t\t\tdocument.querySelectorAll('.dash-product').forEach((el) => {\r\n\t\t\t\tel.addEventListener('click', (e) => {\r\n\t\t\t\t\tconst qty = $(\r\n\t\t\t\t\t\t`.dash-product[data-id=${e.currentTarget.dataset.id}] ~ .qty-cart-page`,\r\n\t\t\t\t\t)[0].innerHTML;\r\n\t\t\t\t\tif (qty * 1 == 1) {\r\n\t\t\t\t\t\tremoveProduct(e);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tupdateProduct(e.currentTarget.dataset.id, -1);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tdocument.querySelectorAll('.plus-product').forEach((el) =>\r\n\t\t\t\tel.addEventListener('click', (e) => {\r\n\t\t\t\t\tupdateProduct(e.currentTarget.dataset.id, 1);\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t}\r\n\t} else {\r\n\t\tdocument\r\n\t\t\t.querySelectorAll('.table.table-cart')\r\n\t\t\t.forEach(\r\n\t\t\t\t(el) =>\r\n\t\t\t\t\t(el.innerHTML =\r\n\t\t\t\t\t\t'<span class=\"empty-cart\">Giỏ hàng trống</span>'),\r\n\t\t\t);\r\n\t\tdocument\r\n\t\t\t.querySelectorAll('.navigation-cart')\r\n\t\t\t.forEach((el) => el.classList.add('disabled'));\r\n\r\n\t\tdocument\r\n\t\t\t.querySelectorAll('.total-price')\r\n\t\t\t.forEach((el) => (el.innerHTML = ``));\r\n\t}\r\n\r\n\tdocument.querySelectorAll('.remove-product').forEach((el) => {\r\n\t\tel.addEventListener('click', (e) => removeProduct(e));\r\n\t});\r\n};\r\n\r\nconst updateProduct = async (id, qty) => {\r\n\ttry {\r\n\t\tconst res = await postDataAPI('cart/addProduct', {\r\n\t\t\tproduct: id,\r\n\t\t\tquantity: qty,\r\n\t\t});\r\n\t\tif (res.status === 200) {\r\n\t\t\ttoast('success', 'Đã cập nhật giỏ hàng');\r\n\t\t\tconst productsRender = res.data.data.map((productItem) => {\r\n\t\t\t\tconst { product } = productItem;\r\n\t\t\t\tproduct.qty = productItem.quantity;\r\n\t\t\t\tproduct.productID = product._id;\r\n\t\t\t\treturn product;\r\n\t\t\t});\r\n\t\t\t(() => renderCart(productsRender, true))();\r\n\t\t} else {\r\n\t\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t\t}\r\n\t} catch (error) {\r\n\t\ttoast('danger', error.response.data.message);\r\n\t}\r\n};\r\n\r\nconst addProductUser = async () => {\r\n\ttry {\r\n\t\tconst productID = document\r\n\t\t\t.querySelector('.product-single')\r\n\t\t\t.getAttribute('data-id');\r\n\t\tconst qty = document.querySelector('.qty').innerText;\r\n\r\n\t\tconst res = await postDataAPI('cart/addProduct', {\r\n\t\t\tproduct: productID,\r\n\t\t\tquantity: qty,\r\n\t\t});\r\n\t\tif (res.status === 200) {\r\n\t\t\ttoast('success', 'Thêm sản phẩm thành công');\r\n\t\t\tconst productsRender = res.data.data.map((productItem) => {\r\n\t\t\t\tconst { product } = productItem;\r\n\t\t\t\tproduct.qty = productItem.quantity;\r\n\t\t\t\tproduct.productID = product._id;\r\n\t\t\t\treturn product;\r\n\t\t\t});\r\n\t\t\t(() => renderCart(productsRender, true))();\r\n\t\t} else {\r\n\t\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t\t}\r\n\t} catch (error) {\r\n\t\ttoast('danger', error.response.data.message);\r\n\t}\r\n};\r\n\r\nexport { renderCart, addProductUser };\r\n","import { getDataAPI, postDataAPI, deleteDataAPI } from './../util/fetchAPI';\r\nimport { toast } from './../util/toastify';\r\n\r\nconst formatter = new Intl.NumberFormat('vi-VN', {\r\n\tstyle: 'currency',\r\n\tcurrency: 'VND',\r\n});\r\n\r\nconst renderData = (products) => {\r\n\tconst cartRender = document.querySelectorAll('tbody');\r\n\tlet totalPrice = 0;\r\n\tif (products.length) {\r\n\t\tcartRender.forEach((el) => {\r\n\t\t\tel.innerHTML = products\r\n\t\t\t\t.map((product) => {\r\n\t\t\t\t\ttotalPrice += product.price * product.qty;\r\n\t\t\t\t\treturn `\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td class=\"w-25\"><img class=\"img-fluid img-thumbnail\" src=${\r\n\t\t\t\t\t\t\t\tproduct.image\r\n\t\t\t\t\t\t\t} alt=\"Sheep\" /></td>\r\n\t\t\t\t\t\t\t<td>${product.name}</td>\r\n\t\t\t\t\t\t\t<td class=\"qty\">${product.qty} </td>\r\n\t\t\t\t\t\t\t<td>${formatter.format(product.price)}</td>\r\n\t\t\t\t\t</tr>`;\r\n\t\t\t\t})\r\n\t\t\t\t.join('');\r\n\t\t});\r\n\r\n\t\tdocument.querySelector(\r\n\t\t\t'.subtotal-price',\r\n\t\t).innerHTML = `${formatter.format(totalPrice)}`;\r\n\r\n\t\tdocument.querySelector(\r\n\t\t\t'.order-total-price ',\r\n\t\t).innerHTML = `${formatter.format(totalPrice + 30000)}`;\r\n\t}\r\n};\r\n\r\nconst checkout = async () => {\r\n\tconst cartData = await getDataAPI('cart');\r\n\tconst productsRender = cartData.data.data.map((productItem) => {\r\n\t\tconst { product } = productItem;\r\n\t\tproduct.qty = productItem.quantity;\r\n\t\tproduct.productID = product._id;\r\n\t\treturn product;\r\n\t});\r\n\r\n\trenderData(productsRender);\r\n\tconst productSubmit = productsRender.map((el) => {\r\n\t\treturn {\r\n\t\t\tproduct: el.productID,\r\n\t\t\tquantity: el.qty * 1,\r\n\t\t};\r\n\t});\r\n\tdocument\r\n\t\t.querySelector('.success-oder')\r\n\t\t.addEventListener('click', async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst name = document.querySelector('#nameUser').value;\r\n\t\t\t\tconst email = document.querySelector('#emailUser').value;\r\n\t\t\t\tconst phone = document.querySelector('#phoneNumberUser').value;\r\n\t\t\t\tconst address = document.querySelector('#addressUser').value;\r\n\t\t\t\tconst idUser =\r\n\t\t\t\t\tdocument.querySelector('#emailUser').dataset.idUser;\r\n\t\t\t\tconst res = await postDataAPI('order', {\r\n\t\t\t\t\tname,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tphone,\r\n\t\t\t\t\taddress,\r\n\t\t\t\t\tproducts: productSubmit,\r\n\t\t\t\t\tidUser,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\tdocument.querySelector(\r\n\t\t\t\t\t\t'.container',\r\n\t\t\t\t\t).innerHTML = `<div class=\"success-checkout\">\r\n\t\t\t\t\t\t\tBạn đã đặt hàng thành công. <a href=\"/\">Quay về trang chủ</a>\r\n\t\t\t\t\t\t\t</div>`;\r\n\r\n\t\t\t\t\tawait deleteDataAPI('cart/removeAllProducts');\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttoast('danger', error.response.data.message);\r\n\t\t\t}\r\n\t\t});\r\n};\r\n\r\nexport { checkout };\r\n","import { getDataAPI, postDataAPI } from './../util/fetchAPI';\r\nimport { toast } from './../util/toastify';\r\nconst formatter = new Intl.NumberFormat('vi-VN', {\r\n\tstyle: 'currency',\r\n\tcurrency: 'VND',\r\n});\r\nconst renderMe = () => {\r\n\tconst activeForm = (form) => {\r\n\t\t$('.form-user').removeClass('login-active register-active');\r\n\t\t$('.form-user').addClass(form);\r\n\t};\r\n\r\n\tdocument.querySelector('.login-span').addEventListener('click', (e) => {\r\n\t\tactiveForm('login-active');\r\n\t});\r\n\r\n\tdocument.querySelector('.register-span').addEventListener('click', (e) => {\r\n\t\tactiveForm('register-active ');\r\n\t});\r\n\r\n\tdocument.querySelectorAll('.login-button').forEach((el) =>\r\n\t\tel.addEventListener('click', (e) => {\r\n\t\t\tactiveForm('login-active ');\r\n\t\t}),\r\n\t);\r\n\r\n\tlet tabContent = document.querySelectorAll('.container__inner');\r\n\tlet tabItem = document.querySelectorAll('.container__item');\r\n\r\n\t// For each element with class 'container__item'\r\n\tfor (let i = 0; i < tabItem.length; i++) {\r\n\t\t// if the element was hovered\r\n\t\t//you can replace mouseover with click\r\n\t\ttabItem[i].addEventListener('click', () => {\r\n\t\t\t// Add to all containers class 'container__inner_hidden'\r\n\t\t\ttabContent.forEach((item) => {\r\n\t\t\t\titem.classList.add('container__inner_hidden');\r\n\t\t\t});\r\n\t\t\t// Clean all links from class 'container__item_active'\r\n\t\t\ttabItem.forEach((item) => {\r\n\t\t\t\titem.classList.remove('container__item_active');\r\n\t\t\t});\r\n\t\t\t// Make visible correct tab content and add class to item\r\n\t\t\ttabContent[i].classList.remove('container__inner_hidden');\r\n\t\t\ttabItem[i].classList.add('container__item_active');\r\n\t\t});\r\n\t}\r\n\r\n\t$('#showInfoModal').on('shown.bs.modal', async function (e) {\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await getDataAPI(`order/${itemId}`);\r\n\t\t\tconst infoRender = document.querySelector('.body-info');\r\n\t\t\tlet totalPrice = 0;\r\n\t\t\tconst { products } = res.data.data;\r\n\r\n\t\t\tinfoRender.innerHTML = products\r\n\t\t\t\t.map((product) => {\r\n\t\t\t\t\ttotalPrice += product.product.price * product.quantity;\r\n\t\t\t\t\treturn `\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td class=\"w-25\"><img class=\"img-fluid img-thumbnail\" style=\"width:100px\" src=${\r\n\t\t\t\t\t\t\t\t\t\t\tproduct.product.image\r\n\t\t\t\t\t\t\t\t\t\t} alt=\"Sheep\" /></td>\r\n\t\t\t\t\t\t\t\t\t\t<td>${product.product.name}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td class=\"qty\">${product.quantity} </td>\r\n\t\t\t\t\t\t\t\t\t\t<td>${formatter.format(product.product.price)}</td>\r\n\t\t\t\t\t\t\t\t</tr>`;\r\n\t\t\t\t})\r\n\t\t\t\t.join('');\r\n\r\n\t\t\tdocument.querySelector(\r\n\t\t\t\t'.order-total-price ',\r\n\t\t\t).innerHTML = `${formatter.format(totalPrice + 30000)}`;\r\n\r\n\t\t\tdocument.querySelector('.name-order span').innerHTML =\r\n\t\t\t\tres.data.data.name;\r\n\r\n\t\t\tdocument.querySelector('.email-order span').innerHTML =\r\n\t\t\t\tres.data.data.email;\r\n\r\n\t\t\tdocument.querySelector('.address-order span').innerHTML =\r\n\t\t\t\tres.data.data.address;\r\n\r\n\t\t\tdocument.querySelector('.phone-number-order span').innerHTML =\r\n\t\t\t\tres.data.data.phone;\r\n\t\t} catch (error) {\r\n\t\t\ttoast('danger', error.response.data.message);\r\n\t\t}\r\n\t});\r\n\r\n\t$('#addNewModal').on('shown.bs.modal', async function (e) {\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await getDataAPI(`order/${itemId}`);\r\n\t\t\tconst productReview = document.querySelector('#productReview');\r\n\t\t\tconst { products } = res.data.data;\r\n\t\t\tproductReview.innerHTML = products\r\n\t\t\t\t.map((product) => {\r\n\t\t\t\t\treturn `<option value=\"${product.product.id}\">${product.product.name}</option>5</option>`;\r\n\t\t\t\t})\r\n\t\t\t\t.join('');\r\n\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector('.btn-add-review')\r\n\t\t\t\t.addEventListener('click', async () => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst rating =\r\n\t\t\t\t\t\t\tdocument.querySelector('#ratingReview').value;\r\n\t\t\t\t\t\tconst review = document.querySelector('#content').value;\r\n\t\t\t\t\t\tconst productReview =\r\n\t\t\t\t\t\t\tdocument.querySelector('#productReview').value;\r\n\r\n\t\t\t\t\t\tconst res = await postDataAPI('review', {\r\n\t\t\t\t\t\t\trating,\r\n\t\t\t\t\t\t\treview,\r\n\t\t\t\t\t\t\tidProduct: productReview,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\ttoast('success', 'Đánh giá thành công');\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\ttoast('danger', e.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\ttoast('danger', error.response.data.message);\r\n\t\t}\r\n\t});\r\n\r\n\tdocument\r\n\t\t.querySelector('.button-update-name')\r\n\t\t.addEventListener('click', async () => {\r\n\t\t\tconst name = document.querySelector('.user-name-update').value;\r\n\t\t\tconst res = await postDataAPI('user/updateMe', { name });\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tlocation.reload();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\tdocument\r\n\t\t.querySelector('.button-password-update')\r\n\t\t.addEventListener('click', async () => {\r\n\t\t\tconst passwordCurrent =\r\n\t\t\t\tdocument.querySelector('.password-current').value;\r\n\t\t\tconst password = document.querySelector('.password-new').value;\r\n\t\t\tconst passwordConfirm =\r\n\t\t\t\tdocument.querySelector('.password-confirm').value;\r\n\t\t\tconst res = await postDataAPI('user/updateMyPassword', {\r\n\t\t\t\tpasswordCurrent,\r\n\t\t\t\tpassword,\r\n\t\t\t\tpasswordConfirm,\r\n\t\t\t});\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tlocation.reload();\r\n\t\t\t}\r\n\t\t});\r\n};\r\n\r\nexport { renderMe };\r\n","import { renderCart, addProductUser } from './cart';\r\n\r\nconst renderProduct = async () => {\r\n\tlet quantity = document.querySelector('.qty').innerText;\r\n\tdocument.querySelector('i.bi.bi-dash-lg').addEventListener('click', () => {\r\n\t\tif (quantity > 0) {\r\n\t\t\tdocument.querySelector('.qty').innerText = quantity * 1 - 1;\r\n\t\t\tquantity--;\r\n\t\t}\r\n\t});\r\n\r\n\tdocument.querySelector('i.bi.bi-plus-lg').addEventListener('click', () => {\r\n\t\tconst max = document.querySelector('.max-quantity').innerText * 1;\r\n\t\tif (quantity < max) {\r\n\t\t\tdocument.querySelector('.qty').innerText = quantity * 1 + 1;\r\n\t\t\tquantity++;\r\n\t\t}\r\n\t});\r\n\r\n\tif (document.querySelector('.product-add-to-cart')) {\r\n\t\tdocument\r\n\t\t\t.querySelector('.product-add-to-cart')\r\n\t\t\t.addEventListener('click', () => addProductUser());\r\n\t}\r\n\r\n\tconst res = await getDataAPI('cart');\r\n\tconst productsRender = res.data.data.map((productItem) => {\r\n\t\tconst { product } = productItem;\r\n\t\tproduct.qty = productItem.quantity;\r\n\t\tproduct.productID = product._id;\r\n\t\treturn product;\r\n\t});\r\n\r\n\trenderCart(productsRender);\r\n\r\n\tdocument\r\n\t\t.querySelector('.product-order')\r\n\t\t.addEventListener('click', async () => {\r\n\t\t\tawait addProductUser();\r\n\t\t});\r\n};\r\n\r\nexport { renderProduct };\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { getDataAPI, postDataAPI } from '../util/fetchAPI';\r\nimport { toast } from './../util/toastify';\r\nimport { checkout } from './checkout';\r\nimport { renderMe } from './me';\r\nimport { renderProduct } from './product';\r\nimport { renderCart, addProductUser } from './cart';\r\n\r\nconst formatter = new Intl.NumberFormat('vi-VN', {\r\n\tstyle: 'currency',\r\n\tcurrency: 'VND',\r\n});\r\n\r\n$(document).ready(async () => {\r\n\tconst checkLogin = document.querySelector('#isLogin');\r\n\tconst checkCheckout = document.querySelector('#checkout');\r\n\tconst checkMePage = document.querySelector('#me');\r\n\t// handle change quantity\r\n\tif (document.querySelector('.product-single')) {\r\n\t\trenderProduct();\r\n\t}\r\n\r\n\tif (checkMePage) {\r\n\t\trenderMe();\r\n\t}\r\n\r\n\tif (checkCheckout) {\r\n\t\tcheckout();\r\n\t} else {\r\n\t\tdocument.querySelector('.btn-search').addEventListener('click', (e) => {\r\n\t\t\t$('.search').toggleClass('active');\r\n\t\t});\r\n\t}\r\n\r\n\tif (checkLogin) {\r\n\t\tconst res = await getDataAPI('cart');\r\n\t\tconst productsRender = res.data.data.map((productItem) => {\r\n\t\t\tconst { product } = productItem;\r\n\t\t\tproduct.qty = productItem.quantity;\r\n\t\t\tproduct.productID = product._id;\r\n\t\t\treturn product;\r\n\t\t});\r\n\r\n\t\trenderCart(productsRender);\r\n\r\n\t\tdocument\r\n\t\t\t.querySelector('.logout-button')\r\n\t\t\t.addEventListener('click', async (e) => {\r\n\t\t\t\tconst res = await getDataAPI('user/logout');\r\n\r\n\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\tlocation.reload();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t} else {\r\n\t\t// Render Cart\r\n\t\tif (!checkCheckout) {\r\n\t\t\t//------------------------------\r\n\t\t\t// Enable form and set form\r\n\t\t\tconst activeForm = (form) => {\r\n\t\t\t\t$('.form-user').removeClass('login-active register-active');\r\n\t\t\t\t$('.form-user').addClass(form);\r\n\t\t\t};\r\n\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector('.login-span')\r\n\t\t\t\t.addEventListener('click', (e) => {\r\n\t\t\t\t\tactiveForm('login-active ');\r\n\t\t\t\t});\r\n\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector('.register-span')\r\n\t\t\t\t.addEventListener('click', (e) => {\r\n\t\t\t\t\tactiveForm('register-active ');\r\n\t\t\t\t});\r\n\r\n\t\t\tdocument.querySelectorAll('.login-button').forEach((el) =>\r\n\t\t\t\tel.addEventListener('click', (e) => {\r\n\t\t\t\t\tactiveForm('login-active ');\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector('.register-button')\r\n\t\t\t\t.addEventListener('click', (e) => {\r\n\t\t\t\t\tactiveForm('register-active ');\r\n\t\t\t\t});\r\n\r\n\t\t\t//------------------------------\r\n\r\n\t\t\t// Login\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector('.form-login-user')\r\n\t\t\t\t.addEventListener('submit', async (e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tconst email =\r\n\t\t\t\t\t\tdocument.querySelector('.user-email-login').value;\r\n\t\t\t\t\tconst password = document.querySelector(\r\n\t\t\t\t\t\t'.user-password-login',\r\n\t\t\t\t\t).value;\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst res = await postDataAPI('user/login', {\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tpassword,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\ttoast('danger', error.response.data.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t// Register\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector('.form-register-user')\r\n\t\t\t\t.addEventListener('submit', async (e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tconst email = document.querySelector(\r\n\t\t\t\t\t\t'.user-email-register',\r\n\t\t\t\t\t).value;\r\n\t\t\t\t\tconst password = document.querySelector(\r\n\t\t\t\t\t\t'.user-password-register',\r\n\t\t\t\t\t).value;\r\n\t\t\t\t\tconst name = document.querySelector(\r\n\t\t\t\t\t\t'.user-name-register',\r\n\t\t\t\t\t).value;\r\n\t\t\t\t\tconst passwordConfirm = document.querySelector(\r\n\t\t\t\t\t\t'.user-password-confirm-register',\r\n\t\t\t\t\t).value;\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst res = await postDataAPI('user/register', {\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tpassword,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tpasswordConfirm,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\ttoast('danger', error.response.data.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n"],"names":[],"sourceRoot":""}