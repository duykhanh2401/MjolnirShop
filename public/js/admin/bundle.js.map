{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AChRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://shop/./public/js/admin/author.js","webpack://shop/./public/js/admin/category.js","webpack://shop/./public/js/admin/login.js","webpack://shop/./public/js/admin/order.js","webpack://shop/./public/js/admin/product.js","webpack://shop/./public/js/admin/user.js","webpack://shop/./public/js/util/fetchAPI.js","webpack://shop/./public/js/util/pagination.js","webpack://shop/./public/js/util/toastify.js","webpack://shop/./public/js/util/uploadImage.js","webpack://shop/webpack/bootstrap","webpack://shop/webpack/runtime/define property getters","webpack://shop/webpack/runtime/hasOwnProperty shorthand","webpack://shop/webpack/runtime/make namespace object","webpack://shop/./public/js/admin/index.js"],"sourcesContent":["import {\r\n\tpostDataAPI,\r\n\tdeleteDataAPI,\r\n\tpatchDataAPI,\r\n\tgetDataAPI,\r\n} from '../util/fetchAPI';\r\nimport { pagination } from '../util/pagination';\r\n\r\nconst createAuthor = async (name) => {\r\n\ttry {\r\n\t\tconst res = await postDataAPI('author', { name });\r\n\t\tif (res.data.status === 'success') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log('error');\r\n\t}\r\n};\r\n\r\nconst deleteAuthor = async (id) => {\r\n\ttry {\r\n\t\tconst res = await deleteDataAPI(`author/${id}`);\r\n\t\tif (res.status === 204) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log('error');\r\n\t}\r\n};\r\n\r\nconst updateAuthor = async (id, data) => {\r\n\ttry {\r\n\t\tdata.slug = data.slug.replace(/ /g, '-');\r\n\t\tconst res = await patchDataAPI(`author/${id}`, data);\r\n\t\tif (res.status === 200) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\nconst renderAuthor = async () => {\r\n\tconst tableList = $('#table')[0];\r\n\r\n\tconst BuildPage = async () => {\r\n\t\tconst { data } = await getDataAPI('author');\r\n\t\tconst listAuthor = data.data;\r\n\r\n\t\tconst buildList = async (buildPagination, min, max) => {\r\n\t\t\ttableList.innerHTML =\r\n\t\t\t\t`<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th class=\"col\">Tên Tác Giả</th>\r\n\t\t\t\t\t\t<th class=\"col\">Slug</th>\r\n\t\t\t\t\t\t<th class=\"col\">Ngày Đăng</th>\r\n\t\t\t\t\t\t<th class=\"col\"></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t<tbody >` +\r\n\t\t\t\tlistAuthor\r\n\t\t\t\t\t.slice(min, max)\r\n\t\t\t\t\t.map((author) => {\r\n\t\t\t\t\t\treturn `\r\n\t\t\t\t<tr class=\"item-list\" data-id=${author._id}>\r\n\t\t\t\t\r\n\t\t\t\t\t<td class=\"info\">${author.name}</td>\r\n\t\t\t\t\t<td class=\"slug\"><span>${author.slug}</span></td>\r\n\t\t\t\t\t<td class=\"date\"><span>${new Date(\r\n\t\t\t\t\t\tauthor.createdAt,\r\n\t\t\t\t\t).toLocaleDateString()}</span></td>\r\n\t\t\t\t\t<td class=\"col-lg-2 col-sm-2 col-4 col-action text-end\">\r\n\t\t\t\t\t\t<div class=\"btn btn-sm font-sm rounded btn-brand\" data-bs-toggle=\"modal\" data-bs-target=\"#updateModal\"><i class=\"bi bi-pencil\"></i>Sửa</div>\r\n\t\t\t\t\t\t<div class=\"btn btn-sm font-sm btn-light rounded btn btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#deleteModal\"><i class=\"bi bi-trash\"></i>Xoá</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\r\n\t\t\t</tr>\r\n\t\t\t\t`;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.join('') +\r\n\t\t\t\t`</tbody>`;\r\n\r\n\t\t\tbuildPagination(listAuthor.length);\r\n\t\t};\r\n\r\n\t\tpagination(buildList);\r\n\t};\r\n\r\n\t// Add New Category\r\n\t$('#addNewModal').on('shown.bs.modal', function (e) {\r\n\t\tconst addAuthorButton = $('.btn-addAuthor')[0];\r\n\r\n\t\taddAuthorButton.onclick = async (e) => {\r\n\t\t\tconst name = document.querySelector('#nameAuthor').value;\r\n\r\n\t\t\tconst isSuccess = await createAuthor(name);\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\tdocument.querySelector('#nameAuthor').value = '';\r\n\t\t\t\t$('#addNewModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t//----------------------------------------\r\n\r\n\t// Delete category\r\n\tconst deleteAuthorButton = $('.btn-delete')[0];\r\n\t$('#deleteModal').on('show.bs.modal', function (e) {\r\n\t\t// get row\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\r\n\t\tdeleteAuthorButton.setAttribute('delete-id', itemId);\r\n\r\n\t\tdeleteAuthorButton.onclick = async (e) => {\r\n\t\t\tconst deleteId = deleteAuthorButton.getAttribute('delete-id');\r\n\t\t\tconst isSuccess = await deleteAuthor(deleteId);\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t$('#deleteModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t//------------------------------\r\n\r\n\t// Update category\r\n\t$('#updateModal').on('show.bs.modal', function (e) {\r\n\t\t// get row\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\t\tconst itemName = item.find('.info')[0].innerText;\r\n\t\tconst itemSlug = item.find('.slug')[0].innerText;\r\n\r\n\t\t// Set giá trị khi hiện modal update\r\n\t\t$('#nameAuthorUpdate')[0].value = itemName;\r\n\t\t$('#slugUpdate')[0].value = itemSlug;\r\n\r\n\t\tconst updateAuthorButton = $('.btn-update-author')[0];\r\n\r\n\t\tupdateAuthorButton.setAttribute('update-id', itemId);\r\n\t\tupdateAuthorButton.onclick = (e) => {\r\n\t\t\tconst deleteId = updateAuthorButton.getAttribute('update-id');\r\n\t\t\tconst name = $('#nameAuthorUpdate')[0].value;\r\n\t\t\tconst slug = $('#slugUpdate')[0].value;\r\n\r\n\t\t\tconst isSuccess = updateAuthor(deleteId, { name, slug });\r\n\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t$('#updateModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\tBuildPage();\r\n};\r\n\r\nexport { renderAuthor };\r\n","import {\r\n\tpostDataAPI,\r\n\tdeleteDataAPI,\r\n\tpatchDataAPI,\r\n\tgetDataAPI,\r\n} from '../util/fetchAPI';\r\nimport { pagination } from '../util/pagination';\r\nconst createCategory = async (name) => {\r\n\ttry {\r\n\t\tconst res = await postDataAPI('category', { name });\r\n\t\tif (res.data.status === 'success') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log('error');\r\n\t}\r\n};\r\n\r\nconst deleteCategory = async (id) => {\r\n\ttry {\r\n\t\tconst res = await deleteDataAPI(`category/${id}`);\r\n\t\tconsole.log(res);\r\n\t\tif (res.status === 204) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log('error');\r\n\t}\r\n};\r\n\r\nconst updateCategory = async (id, data) => {\r\n\ttry {\r\n\t\tdata.slug = data.slug.replace(/ /g, '-');\r\n\t\tconst res = await patchDataAPI(`category/${id}`, data);\r\n\t\tif (res.status === 200) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\nconst renderCategory = async () => {\r\n\tconst tableList = $('#table')[0];\r\n\r\n\tconst BuildPage = async () => {\r\n\t\tconst { data } = await getDataAPI('category');\r\n\t\tconst listCategory = data.data;\r\n\r\n\t\tconst buildList = async (buildPagination, min, max) => {\r\n\t\t\ttableList.innerHTML =\r\n\t\t\t\t`<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th class=\"col\">Tên Danh Mục</th>\r\n\t\t\t\t\t\t<th class=\"col\">Slug</th>\r\n\t\t\t\t\t\t<th class=\"col\">Ngày Đăng</th>\r\n\t\t\t\t\t\t<th class=\"col\"></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody >` +\r\n\t\t\t\tlistCategory\r\n\t\t\t\t\t.slice(min, max)\r\n\t\t\t\t\t.map((category) => {\r\n\t\t\t\t\t\treturn `\r\n\t\t\t\t\t\t\t<tr class=\"item-list\" data-id=${category._id}>\r\n\t\t\t\t\t\t\t\t<td class=\"info\">${category.name}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"slug\">${category.slug}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"date\">${new Date(category.createdAt).toLocaleDateString()}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"col-lg-2 col-sm-2 col-4 col-action text-end\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"btn btn-sm font-sm rounded btn-brand\" data-bs-toggle=\"modal\" data-bs-target=\"#updateModal\"><i class=\"bi bi-pencil\"></i>Sửa</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"btn btn-sm font-sm btn-light rounded btn btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#deleteModal\"><i class=\"bi bi-trash\"></i>Xoá</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>`;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.join('') +\r\n\t\t\t\t`</tbody>`;\r\n\r\n\t\t\tbuildPagination(listCategory.length);\r\n\t\t};\r\n\r\n\t\tpagination(buildList);\r\n\t};\r\n\r\n\t// Add New Category\r\n\t$('#addNewModal').on('shown.bs.modal', function (e) {\r\n\t\tconst addCategoryButton = $('.btn-addCategory')[0];\r\n\r\n\t\taddCategoryButton.onclick = async (e) => {\r\n\t\t\tconst name = document.querySelector('#nameCategory').value;\r\n\r\n\t\t\tconst isSuccess = await createCategory(name);\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\tdocument.querySelector('#nameCategory').value = '';\r\n\t\t\t\t$('#addNewModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t//----------------------------------------\r\n\r\n\t// Delete category\r\n\tconst deleteCategoryButton = $('.btn-delete')[0];\r\n\t$('#deleteModal').on('show.bs.modal', function (e) {\r\n\t\t// get row\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\r\n\t\tdeleteCategoryButton.setAttribute('delete-id', itemId);\r\n\r\n\t\tdeleteCategoryButton.onclick = async (e) => {\r\n\t\t\tconst deleteId = deleteCategoryButton.getAttribute('delete-id');\r\n\t\t\tconst isSuccess = await deleteCategory(deleteId);\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t$('#deleteModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t//------------------------------\r\n\r\n\t// Update category\r\n\t$('#updateModal').on('show.bs.modal', function (e) {\r\n\t\t// get row\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\t\tconst itemName = item.find('.info')[0].innerText;\r\n\t\tconst itemSlug = item.find('.slug')[0].innerText;\r\n\r\n\t\t// Set giá trị khi hiện modal update\r\n\t\t$('#nameCategoryUpdate')[0].value = itemName;\r\n\t\t$('#slugUpdate')[0].value = itemSlug;\r\n\r\n\t\tconst updateCategoryButton = $('.btn-update-category')[0];\r\n\r\n\t\tupdateCategoryButton.setAttribute('update-id', itemId);\r\n\t\tupdateCategoryButton.onclick = (e) => {\r\n\t\t\tconst deleteId = updateCategoryButton.getAttribute('update-id');\r\n\t\t\tconst name = $('#nameCategoryUpdate')[0].value;\r\n\t\t\tconst slug = $('#slugUpdate')[0].value;\r\n\r\n\t\t\tconst isSuccess = updateCategory(deleteId, { name, slug });\r\n\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t$('#updateModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\tBuildPage();\r\n};\r\n\r\nexport { renderCategory };\r\n","const { postDataAPI } = require('../util/fetchAPI');\r\nconst { toast } = require('../util/toastify');\r\n\r\nexports.login = async () => {\r\n\tdocument\r\n\t\t.querySelector('.loginSubmit')\r\n\t\t.addEventListener('click', async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst email = document.querySelector('.email').value;\r\n\t\t\t\tconst password = document.querySelector('.password').value;\r\n\r\n\t\t\t\tconst res = await postDataAPI('user/loginAdmin', {\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t});\r\n\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\tlocation.reload();\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttoast('danger', error.response.data.message);\r\n\t\t\t}\r\n\t\t});\r\n};\r\n","import {\r\n\tpostDataAPI,\r\n\tdeleteDataAPI,\r\n\tpatchDataAPI,\r\n\tgetDataAPI,\r\n} from '../util/fetchAPI';\r\nimport { pagination } from '../util/pagination';\r\n\r\nconst formatter = new Intl.NumberFormat('vi-VN', {\r\n\tstyle: 'currency',\r\n\tcurrency: 'VND',\r\n});\r\n\r\nconst getStatus = (input) => {\r\n\tswitch (input) {\r\n\t\tcase 'Order Placed':\r\n\t\t\treturn 'Chờ xác nhận';\r\n\t\tcase 'Order Confirmed':\r\n\t\t\treturn 'Đã xác nhận';\r\n\t\tcase 'Shipped Out':\r\n\t\t\treturn 'Đang vận chuyển';\r\n\t\tcase 'Order Received':\r\n\t\t\treturn 'Đã nhận hàng';\r\n\t\tcase 'Cancel The Order':\r\n\t\t\treturn 'Huỷ đơn hàng';\r\n\t}\r\n};\r\n\r\nconst deleteOrder = async (id) => {\r\n\ttry {\r\n\t\tconst res = await deleteDataAPI(`order/${id}`);\r\n\t\tconsole.log(res);\r\n\t\tif (res.status === 204) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log('error');\r\n\t}\r\n};\r\n\r\nconst updateOrder = async (id, data) => {\r\n\ttry {\r\n\t\tconst res = await patchDataAPI(`order/${id}`, data);\r\n\t\tif (res.status === 200) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\nconst renderOrder = async () => {\r\n\tconst tableList = $('#table')[0];\r\n\r\n\tconst BuildPage = async () => {\r\n\t\tconst { data } = await getDataAPI('order');\r\n\t\tconst listOrder = data.data;\r\n\r\n\t\tconst buildList = async (buildPagination, min, max) => {\r\n\t\t\ttableList.innerHTML =\r\n\t\t\t\t`<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th class=\"col\">Tên người dùng</th>\r\n\t\t\t\t\t\t<th class=\"col\">Email</th>\r\n\t\t\t\t\t\t<th class=\"col\">Tổng số tiền</th>\r\n\t\t\t\t\t\t<th class=\"col\">Trạng thái</th>\r\n\t\t\t\t\t\t<th class=\"col\"></th>\r\n\t\t\t\t\t\t<th class=\"col\"></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody >` +\r\n\t\t\t\tlistOrder\r\n\t\t\t\t\t.slice(min, max)\r\n\t\t\t\t\t.map((order) => {\r\n\t\t\t\t\t\tlet price = 0;\r\n\t\t\t\t\t\torder.products.forEach((product) => {\r\n\t\t\t\t\t\t\tprice += product.product.price * product.quantity;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn `\r\n\t\t\t\t\t\t\t<tr class=\"item-list\" data-id=${order._id}>\r\n\t\t\t\t\t\t\t\t<td class=\"info\">${order.name}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"email\">${order.email}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"price\">${formatter.format(price + 30000)}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"status\" value=\"${order.status}\">${getStatus(order.status)}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"show-info\" data-bs-toggle=\"modal\" data-bs-target=\"#showInfoModal\">Chi tiết</td>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<td class=\"col-lg-2 col-sm-2 col-4 col-action text-end\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"btn btn-sm font-sm rounded btn-brand\" data-bs-toggle=\"modal\" data-bs-target=\"#updateModal\"><i class=\"bi bi-pencil\"></i>Cập nhật</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"btn btn-sm font-sm btn-light rounded btn btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#deleteModal\"><i class=\"bi bi-trash\"></i>Xoá</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>`;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.join('') +\r\n\t\t\t\t`</tbody>`;\r\n\r\n\t\t\tbuildPagination(listOrder.length);\r\n\t\t};\r\n\r\n\t\tpagination(buildList);\r\n\t};\r\n\r\n\t//----------------------------------------\r\n\r\n\t// Delete order\r\n\tconst deleteUserButton = $('.btn-delete')[0];\r\n\t$('#deleteModal').on('show.bs.modal', function (e) {\r\n\t\t// get row\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\r\n\t\tdeleteUserButton.setAttribute('delete-id', itemId);\r\n\r\n\t\tdeleteUserButton.onclick = async (e) => {\r\n\t\t\tconst deleteId = deleteUserButton.getAttribute('delete-id');\r\n\t\t\tconst isSuccess = await deleteUser(deleteId);\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t$('#deleteModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t//------------------------------\r\n\r\n\t// Update order\r\n\t$('#updateModal').on('show.bs.modal', function (e) {\r\n\t\t// get row\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\r\n\t\tconst statusValue = item.find('.status')[0].getAttribute('value');\r\n\t\tconsole.log(statusValue);\r\n\r\n\t\t// Set giá trị khi hiện modal update\r\n\r\n\t\tdocument.querySelector('#statusOrder').value = statusValue;\r\n\t\tconst updateOrderButton = $('.btn-update-order')[0];\r\n\r\n\t\tupdateOrderButton.setAttribute('update-id', itemId);\r\n\t\tupdateOrderButton.onclick = async (e) => {\r\n\t\t\tconst updateId = updateOrderButton.getAttribute('update-id');\r\n\t\t\tconst status = document.querySelector('#statusOrder').value;\r\n\r\n\t\t\tconst isSuccess = await updateOrder(updateId, { status });\r\n\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t$('#updateModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t// Get info order\r\n\t$('#showInfoModal').on('shown.bs.modal', async function (e) {\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\t\tconsole.log(itemId);\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await getDataAPI(`order/${itemId}`);\r\n\t\t\tconst infoRender = document.querySelector('.body-info');\r\n\t\t\tlet totalPrice = 0;\r\n\t\t\tconst { products } = res.data.data;\r\n\t\t\tconsole.log(res);\r\n\r\n\t\t\tinfoRender.innerHTML = products\r\n\t\t\t\t.map((product) => {\r\n\t\t\t\t\ttotalPrice += product.product.price * product.quantity;\r\n\t\t\t\t\treturn `\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td class=\"w-25\"><img class=\"img-fluid img-thumbnail\" style=\"width:100px\" src=${\r\n\t\t\t\t\t\t\t\t\t\tproduct.product.image\r\n\t\t\t\t\t\t\t\t\t} alt=\"Sheep\" /></td>\r\n\t\t\t\t\t\t\t\t\t<td>${product.product.name}</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"qty\">${product.quantity} </td>\r\n\t\t\t\t\t\t\t\t\t<td>${formatter.format(product.product.price)}</td>\r\n\t\t\t\t\t\t\t</tr>`;\r\n\t\t\t\t})\r\n\t\t\t\t.join('');\r\n\r\n\t\t\tdocument.querySelector(\r\n\t\t\t\t'.order-total-price ',\r\n\t\t\t).innerHTML = `${formatter.format(totalPrice + 30000)}`;\r\n\r\n\t\t\tdocument.querySelector('.name-order span').innerHTML =\r\n\t\t\t\tres.data.data.name;\r\n\r\n\t\t\tdocument.querySelector('.email-order span').innerHTML =\r\n\t\t\t\tres.data.data.email;\r\n\r\n\t\t\tdocument.querySelector('.address-order span').innerHTML =\r\n\t\t\t\tres.data.data.address;\r\n\r\n\t\t\tdocument.querySelector('.phone-number-order span').innerHTML =\r\n\t\t\t\tres.data.data.phone;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t});\r\n\r\n\tBuildPage();\r\n};\r\n\r\nexport { renderOrder };\r\n","import {\r\n\tpostDataAPI,\r\n\tdeleteDataAPI,\r\n\tpatchDataAPI,\r\n\tgetDataAPI,\r\n} from '../util/fetchAPI';\r\nimport { pagination } from '../util/pagination';\r\nimport { toast } from '../util/toastify';\r\nimport { uploadImage } from '../util/uploadImage';\r\n\r\nconst createProduct = async (data) => {\r\n\ttry {\r\n\t\tconst res = await postDataAPI('product', data);\r\n\t\tif (res.data.status === 'success') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t}\r\n};\r\n\r\nconst deleteProduct = async (id) => {\r\n\ttry {\r\n\t\tconst res = await deleteDataAPI(`product/${id}`);\r\n\t\tconsole.log(res);\r\n\t\tif (res.status === 204) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t}\r\n};\r\n\r\nconst updateProduct = async (id, data) => {\r\n\ttry {\r\n\t\tdata.slug = data.slug.replace(/ /g, '-');\r\n\t\tconst res = await patchDataAPI(`product/${id}`, data);\r\n\t\tif (res.status === 200) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\ttoast('danger', error);\r\n\t}\r\n};\r\n\r\nconst formatter = new Intl.NumberFormat('vi-VN', {\r\n\tstyle: 'currency',\r\n\tcurrency: 'VND',\r\n});\r\n\r\nconst renderProduct = () => {\r\n\tconst tableList = $('#table')[0];\r\n\r\n\tconst BuildPage = async () => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await getDataAPI('product');\r\n\t\t\tconst listProduct = data.data;\r\n\t\t\tconst buildList = async (buildPagination, min, max) => {\r\n\t\t\t\ttableList.innerHTML =\r\n\t\t\t\t\t`<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th class=\"col\"></th>\r\n\t\t\t\t\t<th class=\"col\">Tên sản phẩm</th>\r\n\t\t\t\t\t<th class=\"col\">Giá sản phẩm</th>\r\n\t\t\t\t\t<th class=\"col\">Số lượng</th>\r\n\t\t\t\t\t<th class=\"col\"></th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t<tbody >` +\r\n\t\t\t\t\tlistProduct\r\n\t\t\t\t\t\t.slice(min, max)\r\n\t\t\t\t\t\t.map((product) => {\r\n\t\t\t\t\t\t\treturn `\r\n\t\t\t\t\t\t<tr class=\"item-list\" data-id=${product._id}>\r\n\t\t\t\t\t\t\t<td class=\"image-product\"><img src=${product.image} alt=${product.name} /></td>\r\n\t\t\t\t\t\t\t<td class=\"info\">${product.name}\r\n\t\t\t\t\t\t\t<div class=\"d-none author-value\">${product.author\r\n\t\t\t\t\t\t\t\t.map((e) => e.id)\r\n\t\t\t\t\t\t\t\t.join(',')}</div>\r\n\t\t\t\t\t\t\t<div class=\"d-none category-value\">${product.category\r\n\t\t\t\t\t\t\t\t.map((e) => e.id)\r\n\t\t\t\t\t\t\t\t.join(',')}</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"d-none slug\">${product.slug}</div>\r\n\t\t\t\t\t\t\t\t<div class=\"d-none description\">${product.description}</div>\r\n\t\t\t\t\t\t\t\t<div class=\"col-lg-1 col-sm-2 col-4 col-date\"></div></td>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<td class=\"price\">${formatter.format(product.price)} </td>\r\n\t\t\t\t\t\t\t<td class=\"quantity\">${product.quantity}</td>\r\n\t\t\t\t\t\t\t<td class=\"btn btn-sm font-sm rounded btn-brand\" data-bs-toggle=\"modal\" data-bs-target=\"#updateModal\"><i class=\"bi bi-pencil\"></i>Sửa</td>\r\n\t\t\t\t\t\t\t<td class=\"btn btn-sm font-sm btn-light rounded btn btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#deleteModal\"><i class=\"bi bi-trash\"></i>Xoá</td>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t`;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.join('');\r\n\r\n\t\t\t\tbuildPagination(listProduct.length);\r\n\t\t\t};\r\n\r\n\t\t\tpagination(buildList);\r\n\t\t} catch (error) {\r\n\t\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t\t}\r\n\t};\r\n\r\n\t// Add New Category\r\n\t$('#addNewModal').on('shown.bs.modal', function (e) {\r\n\t\tconst addProductButton = $('.btn-addProduct')[0];\r\n\r\n\t\tdocument\r\n\t\t\t.querySelector('.uploadButton')\r\n\t\t\t.addEventListener('click', async () => {\r\n\t\t\t\tconst file = document.querySelector('#imageProduct').files[0];\r\n\t\t\t\tconst src = await uploadImage(file);\r\n\t\t\t\tif (src) $('.imgShow')[0].setAttribute('src', src);\r\n\t\t\t});\r\n\r\n\t\taddProductButton.onclick = async (e) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst name = document.querySelector('#nameProduct').value;\r\n\t\t\t\tconst price = document.querySelector('#priceProduct').value;\r\n\t\t\t\tconst quantity =\r\n\t\t\t\t\tdocument.querySelector('#quantityProduct').value;\r\n\t\t\t\tconst author = $('#authorSelect').val();\r\n\t\t\t\tconst category = $('#categorySelect').val();\r\n\t\t\t\tconst description =\r\n\t\t\t\t\tdocument.querySelector('#description').value;\r\n\t\t\t\tconst image = document\r\n\t\t\t\t\t.querySelector('.imgShow')\r\n\t\t\t\t\t.getAttribute('src');\r\n\t\t\t\tconst isSuccess = await createProduct({\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tprice,\r\n\t\t\t\t\tquantity,\r\n\t\t\t\t\tauthor,\r\n\t\t\t\t\tcategory,\r\n\t\t\t\t\tdescription,\r\n\t\t\t\t\timage,\r\n\t\t\t\t});\r\n\t\t\t\tif (isSuccess) {\r\n\t\t\t\t\tdocument.querySelector('#nameProduct').value = '';\r\n\t\t\t\t\tdocument.querySelector('#priceProduct').value = '';\r\n\r\n\t\t\t\t\tdocument.querySelector('#quantityProduct').value = '';\r\n\t\t\t\t\t$('#authorSelect').val('').trigger('chosen:updated');\r\n\t\t\t\t\t$('#categorySelect').val('').trigger('chosen:updated');\r\n\t\t\t\t\t$('.imgShow')[0].setAttribute('src', '');\r\n\t\t\t\t\tdocument.querySelector('#description').value = '';\r\n\r\n\t\t\t\t\t$('#addNewModal').modal('hide');\r\n\t\t\t\t\tBuildPage();\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t//----------------------------------------\r\n\r\n\t// Delete category\r\n\tconst deleteProductButton = $('.btn-delete')[0];\r\n\t$('#deleteModal').on('show.bs.modal', function (e) {\r\n\t\ttry {\r\n\t\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\t\tconst itemId = item.attr('data-id');\r\n\r\n\t\t\tdeleteProductButton.setAttribute('delete-id', itemId);\r\n\r\n\t\t\tdeleteProductButton.onclick = async (e) => {\r\n\t\t\t\tconst deleteId = deleteProductButton.getAttribute('delete-id');\r\n\t\t\t\tconst isSuccess = await deleteProduct(deleteId);\r\n\t\t\t\tif (isSuccess) {\r\n\t\t\t\t\t$('#deleteModal').modal('hide');\r\n\t\t\t\t\tBuildPage();\r\n\t\t\t\t\ttoast('success', 'Xoá thành công');\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} catch (error) {\r\n\t\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t\t}\r\n\t\t// get row\r\n\t});\r\n\r\n\t//------------------------------\r\n\r\n\t// Update category\r\n\t$('#updateModal').on('show.bs.modal', function (e) {\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\t\tconst itemName = item.find('.info')[0].innerText;\r\n\t\tconst itemSlug = item.find('.info .slug')[0].innerText;\r\n\t\tconst itemPrice = item.find('.price')[0].innerText.replace(/\\D/g, '');\r\n\t\tconst itemQuantity = item.find('.quantity')[0].innerText;\r\n\t\tconst itemAuthor = item\r\n\t\t\t.find('.info .author-value')[0]\r\n\t\t\t.innerText.split(',');\r\n\t\tconst itemCategory = item\r\n\t\t\t.find('.info .category-value')[0]\r\n\t\t\t.innerText.split(',');\r\n\t\tconst itemDescription = item.find('.info .description')[0].innerText;\r\n\t\tconst image = item.find('.image-product img').attr('src');\r\n\r\n\t\t// Set giá trị khi hiện modal update\r\n\t\t$('#nameProductUpdate')[0].value = itemName;\r\n\t\t$('#slugProductUpdate')[0].value = itemSlug;\r\n\t\t$('#priceProductUpdate')[0].value = itemPrice;\r\n\t\t$('#quantityProductUpdate')[0].value = itemQuantity;\r\n\t\t$('#descriptionProductUpdate')[0].value = itemDescription;\r\n\t\t$('#authorSelectUpdate').val(itemAuthor).trigger('chosen:updated');\r\n\t\t$('#categorySelectUpdate').val(itemCategory).trigger('chosen:updated');\r\n\t\t$('.imgShowUpdate')[0].setAttribute('src', image);\r\n\r\n\t\t// Lắng nghe sự kiện upload ảnh\r\n\t\tdocument\r\n\t\t\t.querySelector('.uploadButtonUpdate')\r\n\t\t\t.addEventListener('click', async () => {\r\n\t\t\t\tconst file = document.querySelector('#imageProductUpdate')\r\n\t\t\t\t\t.files[0];\r\n\t\t\t\tconst src = await uploadImage(file);\r\n\t\t\t\tif (src) $('.imgShowUpdate')[0].setAttribute('src', src);\r\n\t\t\t});\r\n\r\n\t\t// Update Product\r\n\t\tconst updateProductButton = $('.btn-update-product')[0];\r\n\t\tupdateProductButton.setAttribute('update-id', itemId);\r\n\t\tupdateProductButton.onclick = async (e) => {\r\n\t\t\tconst name = document.querySelector('#nameProductUpdate').value;\r\n\t\t\tconst price = document.querySelector('#priceProductUpdate').value;\r\n\t\t\tconst quantity = document.querySelector(\r\n\t\t\t\t'#quantityProductUpdate',\r\n\t\t\t).value;\r\n\t\t\tconst author = $('#authorSelectUpdate').val();\r\n\t\t\tconst category = $('#categorySelectUpdate').val();\r\n\t\t\tconst description = document.querySelector(\r\n\t\t\t\t'#descriptionProductUpdate',\r\n\t\t\t).value;\r\n\t\t\tconst slug = document.querySelector('#slugProductUpdate').value;\r\n\t\t\tconst image = document\r\n\t\t\t\t.querySelector('.imgShowUpdate')\r\n\t\t\t\t.getAttribute('src');\r\n\r\n\t\t\tconst updateId = updateProductButton.getAttribute('update-id');\r\n\t\t\tconsole.log(updateId);\r\n\t\t\tconst isSuccess = await updateProduct(updateId, {\r\n\t\t\t\tname,\r\n\t\t\t\tprice,\r\n\t\t\t\tquantity,\r\n\t\t\t\tauthor,\r\n\t\t\t\tcategory,\r\n\t\t\t\tdescription,\r\n\t\t\t\timage,\r\n\t\t\t\tslug,\r\n\t\t\t});\r\n\r\n\t\t\t// Clear form\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\tdocument.querySelector('#nameProductUpdate').value = '';\r\n\t\t\t\tdocument.querySelector('#priceProductUpdate').value = '';\r\n\r\n\t\t\t\tdocument.querySelector('#quantityProductUpdate').value = '';\r\n\t\t\t\t$('#authorSelectUpdate').val('').trigger('chosen:updated');\r\n\t\t\t\t$('#categorySelectUpdate').val('').trigger('chosen:updated');\r\n\t\t\t\t$('.imgShowUpdate')[0].setAttribute('src', '');\r\n\t\t\t\tdocument.querySelector('#descriptionProductUpdate').value = '';\r\n\r\n\t\t\t\t$('#updateModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\tBuildPage();\r\n};\r\n\r\nexport { renderProduct };\r\n\r\n//value.replace(/\\D/g, '');\r\n","import {\r\n\tpostDataAPI,\r\n\tdeleteDataAPI,\r\n\tpatchDataAPI,\r\n\tgetDataAPI,\r\n} from '../util/fetchAPI';\r\nimport { pagination } from '../util/pagination';\r\nconst createUser = async (data) => {\r\n\ttry {\r\n\t\tconst res = await postDataAPI('user', data);\r\n\t\tif (res.data.status === 'success') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t}\r\n};\r\nconst deleteUser = async (id) => {\r\n\ttry {\r\n\t\tconst res = await deleteDataAPI(`user/${id}`);\r\n\t\tconsole.log(res);\r\n\t\tif (res.status === 204) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log('error');\r\n\t}\r\n};\r\n\r\nconst updateUser = async (id, data) => {\r\n\ttry {\r\n\t\tconst res = await patchDataAPI(`user/${id}`, data);\r\n\t\tif (res.status === 200) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\nconst renderUser = async () => {\r\n\tconst tableList = $('#table')[0];\r\n\r\n\tconst BuildPage = async () => {\r\n\t\tconst { data } = await getDataAPI('user');\r\n\t\tconst listUser = data.data;\r\n\r\n\t\tconst buildList = async (buildPagination, min, max) => {\r\n\t\t\ttableList.innerHTML =\r\n\t\t\t\t`<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th class=\"col\">Tên người dùng</th>\r\n\t\t\t\t\t\t<th class=\"col\">Email</th>\r\n\t\t\t\t\t\t<th class=\"col\">Chức vụ</th>\r\n\t\t\t\t\t\t<th class=\"col\">Trạng thái</th>\r\n\t\t\t\t\t\t<th class=\"col\"></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody >` +\r\n\t\t\t\tlistUser\r\n\t\t\t\t\t.slice(min, max)\r\n\t\t\t\t\t.map((user) => {\r\n\t\t\t\t\t\treturn `\r\n\t\t\t\t\t\t\t<tr class=\"item-list\" data-id=${user._id}>\r\n\t\t\t\t\t\t\t\t<td class=\"info\">${user.name}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"email\">${user.email}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"role\" value=${user.role}>${\r\n\t\t\t\t\t\t\tuser.role === 'admin'\r\n\t\t\t\t\t\t\t\t? 'Quản trị viên'\r\n\t\t\t\t\t\t\t\t: 'Người dùng'\r\n\t\t\t\t\t\t}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"role\">${\r\n\t\t\t\t\t\t\t\t\tuser.active === true\r\n\t\t\t\t\t\t\t\t\t\t? 'Đang hoạt động'\r\n\t\t\t\t\t\t\t\t\t\t: 'Không hoạt động'\r\n\t\t\t\t\t\t\t\t}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"col-lg-2 col-sm-2 col-4 col-action text-end\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"btn btn-sm font-sm rounded btn-brand\" data-bs-toggle=\"modal\" data-bs-target=\"#updateModal\"><i class=\"bi bi-pencil\"></i>Sửa</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"btn btn-sm font-sm btn-light rounded btn btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#deleteModal\"><i class=\"bi bi-trash\"></i>Xoá</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>`;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.join('') +\r\n\t\t\t\t`</tbody>`;\r\n\r\n\t\t\tbuildPagination(listUser.length);\r\n\t\t};\r\n\r\n\t\tpagination(buildList);\r\n\t};\r\n\r\n\t// Add New Category\r\n\t$('#addNewModal').on('shown.bs.modal', function (e) {\r\n\t\tconst addCategoryButton = $('.btn-addUser')[0];\r\n\r\n\t\taddCategoryButton.onclick = async (e) => {\r\n\t\t\tconst name = document.querySelector('#nameUser').value;\r\n\t\t\tconst email = document.querySelector('#emailUser').value;\r\n\t\t\tconst password = document.querySelector('#passwordUser').value;\r\n\t\t\tconst role = document.querySelector('#roleUser').value;\r\n\r\n\t\t\tconst isSuccess = await createUser({\r\n\t\t\t\tname,\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t\trole,\r\n\t\t\t\tpasswordConfirm: password,\r\n\t\t\t});\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\tdocument.querySelector('#nameUser').value = '';\r\n\t\t\t\tdocument.querySelector('#emailUser').value = '';\r\n\t\t\t\tdocument.querySelector('#passwordUser').value = '';\r\n\t\t\t\t$('#addNewModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t//----------------------------------------\r\n\r\n\t// Delete category\r\n\tconst deleteUserButton = $('.btn-delete')[0];\r\n\t$('#deleteModal').on('show.bs.modal', function (e) {\r\n\t\t// get row\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\r\n\t\tdeleteUserButton.setAttribute('delete-id', itemId);\r\n\r\n\t\tdeleteUserButton.onclick = async (e) => {\r\n\t\t\tconst deleteId = deleteUserButton.getAttribute('delete-id');\r\n\t\t\tconst isSuccess = await deleteUser(deleteId);\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t$('#deleteModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t//------------------------------\r\n\r\n\t// Update category\r\n\t$('#updateModal').on('show.bs.modal', function (e) {\r\n\t\t// get row\r\n\t\tconst item = $(e.relatedTarget).closest('.item-list');\r\n\t\tconst itemId = item.attr('data-id');\r\n\t\tconst itemName = item.find('.info')[0].innerText;\r\n\t\tconst itemEmail = item.find('.email')[0].innerText;\r\n\t\tconst itemRole = item.find('.role')[0].getAttribute('value');\r\n\r\n\t\t// Set giá trị khi hiện modal update\r\n\r\n\t\tdocument.querySelector('#nameUserUpdate').value = itemName;\r\n\t\tdocument.querySelector('#emailUserUpdate').value = itemEmail;\r\n\t\tdocument.querySelector('#roleUserUpdate').value = itemRole;\r\n\t\tconst updateUserButton = $('.btn-update-user')[0];\r\n\r\n\t\tupdateUserButton.setAttribute('update-id', itemId);\r\n\t\tupdateUserButton.onclick = async (e) => {\r\n\t\t\tconst updateId = updateUserButton.getAttribute('update-id');\r\n\t\t\tconst name = document.querySelector('#nameUserUpdate').value;\r\n\t\t\tconst email = document.querySelector('#emailUserUpdate').value;\r\n\t\t\tconst role = document.querySelector('#roleUserUpdate').value;\r\n\r\n\t\t\tconst isSuccess = await updateUser(updateId, { name, email, role });\r\n\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t$('#updateModal').modal('hide');\r\n\t\t\t\tBuildPage();\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\tBuildPage();\r\n};\r\n\r\nexport { renderUser };\r\n","export const getDataAPI = async (url) => {\r\n\tconst res = await axios.get(`http://localhost:8000/api/v1/${url}`);\r\n\treturn res;\r\n};\r\n\r\nexport const postDataAPI = async (url, data) => {\r\n\tconst res = await axios.post(`http://localhost:8000/api/v1/${url}`, data);\r\n\treturn res;\r\n};\r\n\r\nexport const patchDataAPI = async (url, data) => {\r\n\tconst res = await axios.patch(`http://localhost:8000/api/v1/${url}`, data);\r\n\treturn res;\r\n};\r\n\r\nexport const putDataAPI = async (url, data) => {\r\n\tconst res = await axios.put(`http://localhost:8000/api/v1/${url}`, data);\r\n\treturn res;\r\n};\r\n\r\nexport const deleteDataAPI = async (url, data) => {\r\n\tconst res = await axios.delete(`http://localhost:8000/api/v1/${url}`, data);\r\n\treturn res;\r\n};\r\n","export const pagination = (buildList) => {\r\n\tlet currentPage = 1;\r\n\tlet namesPerPage = 12;\r\n\r\n\tconst calcPages = (number) => {\r\n\t\treturn Math.ceil(number / namesPerPage);\r\n\t};\r\n\r\n\tlet pages = calcPages(currentPage);\r\n\tconst handleClick = (id) => {\r\n\t\tif (id === 'prev') {\r\n\t\t\tcurrentPage--;\r\n\t\t} else if (id === 'next') {\r\n\t\t\tcurrentPage++;\r\n\t\t} else {\r\n\t\t\tcurrentPage = id;\r\n\t\t}\r\n\t\tbuildList(\r\n\t\t\tbuildPagination,\r\n\t\t\t(currentPage - 1) * namesPerPage,\r\n\t\t\tcurrentPage * namesPerPage,\r\n\t\t);\r\n\t};\r\n\r\n\tconst buildPagination = (number) => {\r\n\t\tlet prevButton, nextButton;\r\n\r\n\t\tpages = calcPages(number);\r\n\t\tif (currentPage === 1) {\r\n\t\t\tprevButton = false;\r\n\t\t} else {\r\n\t\t\tprevButton = true;\r\n\t\t}\r\n\r\n\t\tif (currentPage === pages) {\r\n\t\t\tnextButton = false;\r\n\t\t} else {\r\n\t\t\tnextButton = true;\r\n\t\t}\r\n\r\n\t\tif (pages === 0) {\r\n\t\t\tnextButton = false;\r\n\t\t\tprevButton = false;\r\n\t\t}\r\n\t\tlet arrayNumber = [];\r\n\t\tfor (var i = 1; i <= pages; i++) {\r\n\t\t\tarrayNumber.push(i);\r\n\t\t}\r\n\t\tconst renderIndex = arrayNumber\r\n\t\t\t.map((item) => {\r\n\t\t\t\treturn `\r\n\t\t\t<li class=\"page-item number ${\r\n\t\t\t\titem === currentPage ? 'active' : ''\r\n\t\t\t}\"> <a class=\"page-link\" href=\"#\">${item}</a></li>\r\n\t\t\t`;\r\n\t\t\t})\r\n\t\t\t.join('');\r\n\r\n\t\t$('.pagination')[0].innerHTML = `\r\n\t\t<div aria-label=\"Page navigation example\">\r\n\t\t<ul class=\"pagination justify-content-center\">\r\n\t\t${\r\n\t\t\tprevButton\r\n\t\t\t\t? '<li class=\"page-item prev\"><a class=\"page-link\" href=\"#\"><i class=\"bi bi-chevron-left\"></i></a></li>'\r\n\t\t\t\t: ''\r\n\t\t}\r\n\t\t\t${renderIndex}\r\n\t\t${\r\n\t\t\tnextButton\r\n\t\t\t\t? '<li class=\"page-item next\"><a class=\"page-link\" href=\"#\"><i class=\"bi bi-chevron-right\"></i></a></li>'\r\n\t\t\t\t: ''\r\n\t\t}\r\n\r\n\t\t  \r\n\t\t</ul>\r\n\t  </div>\r\n\t\t`;\r\n\r\n\t\t$('.prev').click(() => handleClick('prev'));\r\n\t\t$('.next').click(() => handleClick('next'));\r\n\t\t$('.page-item.number').each(function (index) {\r\n\t\t\t$(this).click(() => handleClick(index + 1));\r\n\t\t});\r\n\t};\r\n\r\n\tbuildList(\r\n\t\tbuildPagination,\r\n\t\t(currentPage - 1) * namesPerPage,\r\n\t\tcurrentPage * namesPerPage,\r\n\t);\r\n};\r\n","export const toast = (status, message) => {\r\n\t// data\r\n\tvar clear;\r\n\tvar msgDuration = 3000;\r\n\tvar $msg = $('.msg');\r\n\tfunction timer() {\r\n\t\tclearTimeout(clear);\r\n\t\tclear = setTimeout(function () {\r\n\t\t\thide();\r\n\t\t}, msgDuration);\r\n\t}\r\n\r\n\tfunction hide() {\r\n\t\t$msg.removeClass('msg-success msg-danger msg-warning msg-info active');\r\n\t}\r\n\t// 2 seconds\r\n\thide();\r\n\r\n\t// cache DOM\r\n\r\n\t// render message\r\n\r\n\tswitch (status) {\r\n\t\tcase 'success':\r\n\t\t\t$msg.addClass('msg-success active').text(message);\r\n\t\t\tbreak;\r\n\t\tcase 'danger':\r\n\t\t\t$msg.addClass('msg-danger active').text(message);\r\n\t\t\tbreak;\r\n\t\tcase 'warning':\r\n\t\t\t$msg.addClass('msg-warning active').text(message);\r\n\t\t\tbreak;\r\n\t\tcase 'info':\r\n\t\t\t$msg.addClass('msg-info active').text(message);\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\t// bind events\r\n\r\n\t$msg.on('transitionend', timer);\r\n};\r\n","import { toast } from './toastify';\r\nexport const uploadImage = async (file) => {\r\n\ttry {\r\n\t\tconst formData = new FormData();\r\n\r\n\t\tformData.append('file', file);\r\n\t\tformData.append('upload_preset', 'BookShop');\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'https://api.cloudinary.com/v1_1/duykhanh2401/image/upload',\r\n\t\t\tformData,\r\n\t\t);\r\n\t\ttoast('success', 'Đăng ảnh thành công');\r\n\r\n\t\treturn data.secure_url;\r\n\t} catch (error) {\r\n\t\ttoast('danger', 'Có lỗi xảy ra. Vui lòng thử lại sau');\r\n\t}\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { renderCategory } from './category';\r\nimport { renderAuthor } from './author';\r\nimport { renderProduct } from './product';\r\nimport { login } from './login';\r\nimport { getDataAPI } from '../util/fetchAPI';\r\nimport { renderUser } from './user';\r\nimport { renderOrder } from './order';\r\n\r\n$(document).ready(function () {\r\n\t// Phân loại các trang\r\n\tconst category = document.querySelector('#category');\r\n\tconst author = document.querySelector('#author');\r\n\tconst product = document.querySelector('#product');\r\n\tconst loginPage = document.querySelector('#loginPage');\r\n\tconst mainPage = document.querySelector('#main');\r\n\tconst user = document.querySelector('#user');\r\n\tconst order = document.querySelector('#order');\r\n\r\n\t//-----------------------------------------\r\n\r\n\tif (mainPage) {\r\n\t\t$('.logout')[0].addEventListener('click', async () => {\r\n\t\t\tconst res = await getDataAPI('user/logout');\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tlocation.reload();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t$('.menu-link').each((index, el) => {\r\n\t\tif (window.location.pathname === el.pathname) {\r\n\t\t\tel.parentElement.classList.add('active');\r\n\t\t}\r\n\t});\r\n\r\n\tif (category) {\r\n\t\trenderCategory();\r\n\t}\r\n\tif (author) {\r\n\t\trenderAuthor();\r\n\t}\r\n\r\n\tif (user) {\r\n\t\trenderUser();\r\n\t}\r\n\r\n\tif (order) {\r\n\t\trenderOrder();\r\n\t}\r\n\r\n\tif (product) {\r\n\t\t$('.chosen-select').chosen({\r\n\t\t\tno_results_text: 'Không có thông tin trùng khớp',\r\n\t\t});\r\n\t\trenderProduct();\r\n\t}\r\n\r\n\tif (loginPage) {\r\n\t\tlogin();\r\n\t}\r\n});\r\n"],"names":[],"sourceRoot":""}